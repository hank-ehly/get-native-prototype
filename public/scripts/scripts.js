if(function(){"use strict";angular.module("angularApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","ng-token-auth","flash","ui.bootstrap","youtube-embed","timer"])}(),function(){"use strict";var a=[],b={},c="";c="../components/",a=["contactUs","faqs","libraryDetail","libraryTop","registration","siteTop","studyListening","studyShadowing","studySpeaking","studyTop","studyWriting","userAccount","userHome","userInterests"];for(var d=0;d<a.length;d++)Object.defineProperty(b,a[d],{value:[c+a[d]+"/"+a[d]+".html",a[d]+"Ctrl"]});angular.module("angularApp").config(["$stateProvider","$urlRouterProvider",function(a,c){a.state("siteTop",{url:"/",templateUrl:b.siteTop[0],controller:b.siteTop[1]}).state("contactUs",{url:"/contactus",templateUrl:b.contactUs[0],controller:b.contactUs[1]}).state("faqs",{url:"/faqs",templateUrl:b.faqs[0],controller:b.faqs[1]}).state("libraryDetail",{url:"/libraryDetail/:videoId",templateUrl:b.libraryDetail[0],controller:b.libraryDetail[1]}).state("libraryTop",{url:"/libraryTop",templateUrl:b.libraryTop[0],controller:b.libraryTop[1]}).state("registration",{url:"/registration",templateUrl:b.registration[0],controller:b.registration[1]}).state("studyListening",{url:"/studyListening?v&lm&t",templateUrl:b.studyListening[0],controller:b.studyListening[1],resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).state("studyShadowing",{url:"/studyShadowing?v&lm&t",templateUrl:b.studyShadowing[0],controller:b.studyShadowing[1],resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).state("studySpeaking",{url:"/studySpeaking?v&lm&t",templateUrl:b.studySpeaking[0],controller:b.studySpeaking[1],resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).state("studyTop",{url:"/studyTop",templateUrl:b.studyTop[0],controller:b.studyTop[1],resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).state("studyWriting",{url:"/studyWriting?v&lm&t",templateUrl:b.studyWriting[0],controller:b.studyWriting[1],resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).state("userAccount",{url:"/userAccount",templateUrl:b.userAccount[0],controller:b.userAccount[1],resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).state("userHome",{url:"/userHome",templateUrl:b.userHome[0],controller:b.userHome[1],resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).state("userInterests",{url:"/userInterests",templateUrl:b.userInterests[0],controller:b.userInterests[1],resolve:{auth:["$auth",function(a){return a.validateUser()}]}}),c.otherwise("/")}])}(),function(){"use strict";angular.module("angularApp").config(["$authProvider","apiBaseUrl",function(a,b){a.configure({apiUrl:b,confirmationSuccessUrl:"http://localhost:9000/#/userHome"})}]).run(["$rootScope","$state","Flash","Announce","$auth",function(a,b,c,d,e){a.$on("auth:validation-success",function(a,b){}),a.$on("$stateChangeStart",function(a,b,c,d,e){}),a.$on("auth:email-confirmation-success",function(a,b){c.create("success",d.authEmailConfirmationSuccess(b.email))}),a.$on("auth:email-confirmation-error",function(a,b){c.create("danger",d.whoops(b.errors[0]))}),a.$on("$stateChangeError",function(a,c,d,e,f,g){b.go("siteTop")}),a.$on("auth:invalid",function(){c.create("danger",d.authInvalid)})}])}(),function(){"use strict";angular.module("angularApp").constant("apiBaseUrl","http://localhost:3000")}(),function(){"use strict";var a=function(){function a(a,b){var c=" "+a.className+" ",d=" "+b+" ";return c.replace(/[\t\r\n\f]/g," ").indexOf(d)>-1?!0:!1}var b={hasClass:a};return b};angular.module("angularApp").factory("Helper",a),a.$inject=[]}(),function(){"use strict";var a={authInvalid:"Please login first.",loginSuccess:"You have successfully logged in.",loginFailure:"Whoops! Failed to login.",logoutSuccess:"You have successfully logged out.",logoutFailure:"Whoops! Failed to logout.",addToCueSuccess:"Successfully added video to cue.",authEmailConfirmationSuccess:function(a){return"Welcome, "+a+". Your account has been verified."},registrationSuccess:function(a){return"A registration email was sent to "+a+"."},whoops:function(a){return"<strong>Whoops!</strong> "+a}};angular.module("angularApp").value("Announce",a)}(),function(){"use strict";var a=function(){var a={};return a.listening={controls:0,modestbranding:1,showinfo:0,autoplay:1},a.shadowing=a.listening,a.libraryDetail={controls:1,modestbranding:1,showinfo:0},a.userHome=a.libraryDetail,a};angular.module("angularApp").factory("PlayerVars",a),a.$inject=[]}(),function(){"use strict";var a=function(a,b,c,d,e,f,g){function h(e){a.submitLogin(e).then(function(){b.go("userHome"),c.create("success",d.loginSuccess)})["catch"](function(a){c.create("danger",d.whoops(a.errors[0]))})}function i(){a.signOut().then(function(){b.go("siteTop"),c.create("success",d.logoutSuccess)})["catch"](function(a){c.create("danger",d.whoops(a.data.errors[0]))})}function j(b){a.submitRegistration(b).then(function(a){function b(a){angular.forEach(a,function(a){var b=new e.resource;b.user_id=m.id,b.language_id=a,b.$save(function(a){var b=a.language_module,g=new f.resource({language_module_id:b.id});g.$save(function(a){var f=a.cue,g={};g.cue_id=f.id,e.resource.update({id:b.id},g,function(){c.create("success",d.registrationSuccess(m.email))},k)},j)},i)})}function h(a){var c=[];angular.forEach(a.languages,function(a){c.push(a.id)}),b(c)}function i(a){console.log("Error",a)}function j(a){console.log("Error",a)}function k(a){console.log("Error",a)}function l(a){console.log("Error",a)}var m=a.data.data;g.resource.get(h,l)})["catch"](function(a){var b=document.createElement("DIV"),d=document.createTextNode("Please fix the following errors and try again."),e=document.createElement("H3");e.appendChild(d);var f=document.createElement("OL"),g=a.data.errors.full_messages;angular.forEach(g,function(a){var b=document.createElement("LI"),c=document.createTextNode(a);b.appendChild(c),f.appendChild(b)}),b.appendChild(e),b.appendChild(f),c.create("danger",b)})}var k;return k={login:h,logout:i,submitRegistration:j}};angular.module("angularApp").factory("authService",a),a.$inject=["$auth","$state","Flash","Announce","LanguageModule","Cue","Language"]}(),function(){"use strict";var a=function(a,b){var c,d,e;return c=b+"/language_modules/:id.json",d={id:"@id"},e={save:{method:"POST"},update:{method:"PUT"}},{resource:a(c,d,e)}};angular.module("angularApp").factory("LanguageModule",a),a.$inject=["$resource","apiBaseUrl"]}(),function(){"use strict";var a=function(a,b,c){a.answer=b,a.ok=function(){c.close()},a.cancel=function(){c.dismiss("cancel")}};angular.module("angularApp").controller("modalCtrl",a),a.$inject=["$scope","answer","$modalInstance"]}(),function(){"use strict";var a=function(a,b,c){return{restrict:"E",templateUrl:"shared/globalNavbar/globalNavbarTemplate.html",link:function(b){b.languages=["Japanese","English"],void 0===c.search().lang&&c.search("lang",b.languages[0]),b.selectedLanguage=c.search().lang,b.$on("changeLanguage",function(){b.selectedLanguage=c.search().lang}),b.langClickHandler=function(a){c.search("lang",a),b.$broadcast("changeLanguage")},b.barItems=[{title:"Home",state:"userHome",restricted:!0},{title:"Library",state:"libraryTop",restricted:!1},{title:"Study",state:"studyTop",restricted:!0}],b.isActive=function(a){return b.active===a},b.selectBarItem=function(a){b.active=a},b.logout=function(){a.logout()}}}};angular.module("angularApp").directive("globalNavbar",a),a.$inject=["authService","$window","$location"]}(),function(){"use strict";var a=function(a,b){var c,d,e;return c=b+"/writing_answers/:id.json",d={id:"@id"},e={save:{method:"POST"},update:{method:"PUT"}},{resource:a(c,d,e)}};angular.module("angularApp").factory("WritingAnswer",a),a.$inject=["$resource","apiBaseUrl"]}(),function(){"use strict";var a=function(){return{templateUrl:"shared/staticContentNavigationPanel/staticContentNavigationPanelTemplate.html"}};angular.module("angularApp").directive("staticContentNavigationPanel",a),a.$inject=[]}(),function(){"use strict";var a=function(){return{templateUrl:"shared/userContentNavigationPanel/userContentNavigationPanelTemplate.html"}};angular.module("angularApp").directive("userContentNavigationPanel",a),a.$inject=[]}(),function(){"use strict";var a=function(a,b,c){return{restrict:"E",templateUrl:"shared/cueVideosTable/cueVideosTableTemplate.html",link:function(d,e,f,g){function h(e,f){var g;return confirm("Delete this video from your playlist?")?(d.selectedCueVideo.code===e.code&&d.cueVideos.length>1&&(g=0===f?1:f-1),void a.resource.removeFromCue({user_id:c.user.id,video_id:e.id},function(a){isNaN(g)||d.selectCueVideo(d.cueVideos[g]),d.cueVideos.splice(f,1),b.create("success",a.notice)},function(a){console.log("Error",a)})):!1}d.uneditable="uneditable"in f?!0:!1,d.removeFromCue=h}}};angular.module("angularApp").directive("cueVideosTable",a),a.$inject=["Cue","Flash","$auth"]}(),function(){"use strict";var a=function(a,b,c,d){function e(a,b){var d=c.defer();return this.resource.get({resource:a,videoId:b},function(a){a.resource=angular.fromJson(a.resource),d.resolve(a)},function(a){console.log("Error",a)}),d.promise}function f(a){console.log("Error",a)}function g(a){console.log("Error",a)}function h(a,b){var e=c.defer(),h=isNaN(a)?a.selectedVideo.id:a;return this.resource.get({id:h},function(a){var c={};c.video=angular.fromJson(a.video),c.scripts=angular.fromJson(a.video_scripts),c.tabs=[],angular.forEach(c.scripts,function(a){var f={};f.id=a.id,f.title=a.language.name,f.content=a.content,f.original=a.original,a.original&&(f.active=!0,d.resource.get({video_script_id:f.id},function(a){c.collocations=angular.fromJson(a.collocations),b&&(f.content=d.wrap(f.content,c.collocations,"span","collocation"),c.selectedQuote="...",c.selectedDescription="Select a collocation from the above script!"),e.resolve(c)},g)),c.tabs.push(f)})},f),e.promise}var i,j,k;return i=b+"/videos/:id.json",j={id:"@id"},k={save:{method:"POST"},update:{method:"PUT"}},{resource:a(i,j,k),setVideo:h,fetch:e}};angular.module("angularApp").factory("Video",a),a.$inject=["$resource","apiBaseUrl","$q","Collocation"]}(),function(){"use strict";var a=function(a,b){var c,d,e;return c=b+"/video_scripts/:id.json",d={id:"@id"},e={save:{method:"POST"},update:{method:"PUT"}},{resource:a(c,d,e)}};angular.module("angularApp").factory("VideoScript",a),a.$inject=["$resource","apiBaseUrl"]}(),function(){"use strict";var a=function(a,b,c,d,e){function f(a){console.log("Error",a)}function g(a){console.log("Error",a)}function h(a,b,d,h){var i=e.defer();return this.resource.get({user_id:a,language_module_id:b},function(a){var b={};b.cueVideos=angular.fromJson(a.videos),b.cueVideos.length?(b.selectedVideo=d?d:b.cueVideos[0],c.setVideo(b,h).then(function(a){b.video=a.video,b.scripts=a.scripts,b.tabs=a.tabs,b.collocations=a.collocations,b.selectedQuote=a.selectedQuote,b.selectedDescription=a.selectedDescription,i.resolve(b)},g)):i.resolve(b)},f),i.promise}var i,j,k,l,m;return l={method:"POST",url:b+"/add_video_to_cue/:cue_id/:video_id.json",params:{cue_id:"@cue_id",video_id:"@video_id"}},m={method:"DELETE",url:b+"/remove_video_from_cue/:user_id/:video_id.json",params:{cue_id:"@user_id",video_id:"@video_id"}},i=b+"/cues/:id.json",j={id:"@id"},k={save:{method:"POST"},update:{method:"PUT"},addVideoToCue:l,removeFromCue:m},{resource:a(i,j,k),initializeContents:h}};angular.module("angularApp").factory("Cue",a),a.$inject=["$resource","apiBaseUrl","Video","Collocation","$q"]}(),function(){"use strict";var a=function(a,b){var c,d,e;return c=b+"/languages/:id.json",d={id:"@id"},e={save:{method:"POST"},update:{method:"PUT"}},{resource:a(c,d,e)}};angular.module("angularApp").factory("Language",a),a.$inject=["$resource","apiBaseUrl"]}(),function(){"use strict";var a=function(a,b){var c,d,e;return c=b+"/categories/:id.json",d={id:"@id"},e={save:{method:"POST"},update:{method:"PUT"}},a(c,d,e)};angular.module("angularApp").factory("Category",a),a.$inject=["$resource","apiBaseUrl"]}(),function(){"use strict";var a=function(a,b){var c,d,e,f;return f={method:"GET",url:b+"/hasVideo/:user_id/:video_id.json",params:{user_id:"@user_id",video_id:"@video_id"}},c=b+"/users/:id.json",d={id:"@id"},e={save:{method:"POST"},update:{method:"PUT"},hasVideo:f},{resource:a(c,d,e)}};angular.module("angularApp").factory("User",a),a.$inject=["$resource","apiBaseUrl"]}(),function(){"use strict";var a=function(a,b){function c(a,b,c,d){var e=a;return angular.forEach(b,function(a){var b,f,g,h,i;b=a.quote,f=e.indexOf(b),g=f+b.length,h=e.substring(f,g),i="<"+c,i+=' class="'+d+'"',i+=">",i+=h,i+="</"+c+">",e=e.replace(h,i)}),e}var d,e,f;return d=b+"/collocations/:id.json",e={id:"@id"},f={save:{method:"POST"},update:{method:"PUT"}},{resource:a(d,e,f),wrap:c}};angular.module("angularApp").factory("Collocation",a),a.$inject=["$resource","apiBaseUrl"]}(),function(){"use strict";var a=function(a){return{restrict:"E",templateUrl:"shared/collocationPanel/collocationPanelTemplate.html",link:function(b,c,d,e){function f(c){if(a.hasClass(c.target,"collocation")){var d=c.target.textContent;b.selectedQuote=d,angular.forEach(b.collocations,function(a){a.quote===d&&(b.selectedDescription=a.description)})}}b.ss="studySpeaking"===d["class"]?!0:!1,b.videoScriptClickHandler=f}}};angular.module("angularApp").directive("collocationPanel",a),a.$inject=["Helper"]}(),!window.YT)var YT={loading:0,loaded:0};if(!window.YTConfig)var YTConfig={host:"http://www.youtube.com"};YT.loading||(YT.loading=1,function(){var a=[];YT.ready=function(b){YT.loaded?b():a.push(b)},window.onYTReady=function(){YT.loaded=1;for(var b=0;b<a.length;b++)try{a[b]()}catch(c){}},YT.setConfig=function(a){for(var b in a)a.hasOwnProperty(b)&&(YTConfig[b]=a[b])};var b=document.createElement("script");b.type="text/javascript",b.id="www-widgetapi-script",b.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vfl3zSWzk/www-widgetapi.js",b.async=!0;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}()),function(){"use strict";var a=function(){return function(a){var b,c,d;return b=Math.floor(a/60),c=a%60,c.toString().length<2&&(c+="0"),d=b+":"+c}};angular.module("angularApp").filter("inMinutes",a),a.$inject=[]}(),function(){"use strict";var a=function(){return{restrict:"E",templateUrl:"shared/globalFooter/globalFooterTemplate.html"}};angular.module("angularApp").directive("globalFooter",a),a.$inject=[]}(),function(){"use strict";var a=function(a){a.emails={press:"press.inquiries@getnative.com",business:"business.inquiries@getnative.com"}};a.$inject=["$scope"],angular.module("angularApp").controller("contactUsCtrl",a)}(),function(){"use strict";var a=function(){return{restrict:"E",templateUrl:"components/contactUs/contactUsFormTemplate.html",link:function(a){a.subjects=["subject 1","subject 2","subject 3","subject 4"]}}};angular.module("angularApp").directive("contactUsForm",a),a.$inject=[]}(),function(){"use strict";var a=function(a,b){function c(b){a.faqData=b.data}function d(a){console.log("getFaqsJsonFailure",a)}b.get("components/faqs/faqs.json").then(c,d),a.isCollapsed=!0};a.$inject=["$scope","$http"],angular.module("angularApp").controller("faqsCtrl",a)}(),function(){"use strict";var a=function(a,b,c,d,e,f,g,h,i,j,k){function l(c){a.video=c.video,a.tabs=c.tabs,a.collocations=c.collocations,a.selectedQuote=c.selectedQuote,a.selectedDescription=c.selectedDescription,h.resource.hasVideo({user_id:b.user.id,video_id:a.video.id},function(b){a.alreadyInCue=b.result,p=b.cue},function(a){console.log("Error",a)})}function m(a){console.log("Error",a)}function n(b){g.resource.addVideoToCue({cue_id:p.id,video_id:b.id},function(){i.create("success",j.addToCueSuccess),a.alreadyInCue=!0},function(a){console.log("Error",a)})}function o(c){g.resource.removeFromCue({user_id:b.user.id,video_id:c.id},function(b){i.create("success",b.notice),a.alreadyInCue=!1},function(a){console.log("error not removed",a)})}var p;e.setVideo(d.videoId,!0).then(l,m),a.playerVars=k.libraryDetail,a.removeFromCue=o,a.addToCue=n};a.$inject=["$scope","$rootScope","$http","$stateParams","Video","Collocation","Cue","User","Flash","Announce","PlayerVars"],angular.module("angularApp").controller("libraryDetailCtrl",a)}(),function(){"use strict";var a=function(a,b,c,d,e,f){e.get(function(b){a.categories=angular.fromJson(b.categories)}),d.resource.get({language:b.selectedLanguage},function(b){a.searchResults=angular.fromJson(b.videos)}),a.$on("changeLanguage",function(){d.resource.get({language:f.search().lang},function(b){a.searchResults=angular.fromJson(b.videos)})}),a.predicate="created_at",a.reverse=!0,a.order=function(b){a.reverse=a.predicate===b?!a.reverse:!1,a.predicate=b},a.selectCategory=function(b){a.selectedCategory=a.categories[b].name},a.allowedNumberOfResults=5,a.showMore=function(){var b=a.searchResults.length;a.allowedNumberOfResults<b?a.allowedNumberOfResults+=5:a.allowedNumberOfResults>=b&&(a.cantShowMore=!0)}};angular.module("angularApp").controller("libraryTopCtrl",a),a.$inject=["$scope","$rootScope","$http","Video","Category","$location"]}(),function(){"use strict";var a=function(a,b,c,d){};a.$inject=["$scope","$auth","$state","Flash"],angular.module("angularApp").controller("registrationCtrl",a)}(),function(){"use strict";var a=function(a){return{restrict:"E",templateUrl:"components/registration/registrationFormTemplate.html",link:function(b){b.submit=function(b){a.submitRegistration(b)}}}};angular.module("angularApp").directive("registrationForm",a),a.$inject=["authService"]}(),function(){"use strict";var a=function(a,b,c,d,e,f){a.login=function(){f.login(a.loginForm)}};a.$inject=["$scope","$rootScope","$state","Flash","Announce","authService"],angular.module("angularApp").controller("siteTopCtrl",a)}(),function(){"use strict";var a=function(a,b,c,d,e,f){function g(b){a.video=b.video,a.tabs=b.tabs,a.collocations=b.collocations,a.selectedQuote=b.selectedQuote,a.selectedDescription=b.selectedDescription}function h(a){console.log("Error",a)}c.setVideo(b.v,!1).then(g,h),a.playerVars=f.listening,a.$on("youtube.player.ended",function(a,b){b.playVideo()}),a.$on("youtube.player.ready",function(){a.$broadcast("timer-start")}),a.studyTime=b.t/4*60,a.timerRunning=!0,a.resumeTimer=function(){a.$broadcast("timer-resume"),a.timerRunning=!0},a.stopTimer=function(){a.$broadcast("timer-stop"),a.timerRunning=!1},a.finished=function(){a.studyListeningPlayer.pauseVideo(),console.log("redirecting in 3 seconds"),setTimeout(function(){console.log("redirecting now"),e.go("studyShadowing",{v:b.v,lm:b.lm,t:b.t})},3e3)}};a.$inject=["$scope","$stateParams","Video","Collocation","$state","PlayerVars"],angular.module("angularApp").controller("studyListeningCtrl",a)}(),function(){"use strict";var a=function(a,b,c,d,e,f){function g(b){a.video=b.video,a.tabs=b.tabs,a.collocations=b.collocations,a.selectedQuote=b.selectedQuote,a.selectedDescription=b.selectedDescription}function h(a){console.log("Error",a)}c.setVideo(b.v).then(g,h),a.playerVars=f.shadowing,a.$on("youtube.player.ended",function(a,b){b.playVideo()}),a.$on("youtube.player.ready",function(){a.$broadcast("timer-start")}),a.studyTime=b.t/4*60,a.timerRunning=!0,a.resumeTimer=function(){a.$broadcast("timer-resume"),a.timerRunning=!0},a.stopTimer=function(){a.$broadcast("timer-stop"),a.timerRunning=!1},a.finished=function(){a.studyShadowingPlayer.pauseVideo(),console.log("redirecting in 3 seconds"),setTimeout(function(){console.log("redirecting now"),e.go("studySpeaking",{v:b.v,lm:b.lm,t:b.t})},3e3)}};a.$inject=["$scope","$stateParams","Video","Collocation","$state","PlayerVars"],angular.module("angularApp").controller("studyShadowingCtrl",a)}(),function(){"use strict";var a=function(a,b,c,d){c.setVideo(b.v,!0).then(function(b){a.video=b.video,a.collocations=b.collocations,a.selectedQuote=a.collocations[0].quote,a.selectedDescription=a.collocations[0].description,a.originalTabs=[],a.translatedTabs=[],angular.forEach(b.tabs,function(b){b.original?a.originalTabs.push(b):a.translatedTabs.push(b)}),a.translatedTabs[0].active=!0},function(a){console.log("Error",a)}),a.colcount=0,a.next=function(b){var c,d=a.collocations.length;angular.forEach(a.collocations,function(b){if(b.quote.indexOf(a.selectedQuote)>-1){var e=a.collocations.indexOf(b)===d-1?!0:!1;c=e?0:a.collocations.indexOf(b)+1}}),a.selectedQuote=a.collocations[c].quote,a.selectedDescription=a.collocations[c].description,b&&(a.colcount++,a.colcount>=a.collocations.length&&(a.overachiever=!0))},a.studyTime=b.t/4*60,a.timerRunning=!0,a.resumeTimer=function(){a.$broadcast("timer-resume"),a.timerRunning=!0},a.stopTimer=function(){a.$broadcast("timer-stop"),a.timerRunning=!1},a.finished=function(){console.log("redirecting in 3 seconds"),setTimeout(function(){console.log("redirecting to writing"),d.go("studyWriting",{v:b.v,lm:b.lm,t:b.t})},3e3)}};a.$inject=["$scope","$stateParams","Video","$state"],angular.module("angularApp").controller("studySpeakingCtrl",a)}(),function(){"use strict";var a=function(a,b,c,d,e){function f(b){a.cueVideos=angular.fromJson(b.videos),a.cueVideos.length&&(a.selectedCueVideo=a.cueVideos[0])}function g(a){console.log("Error",a)}function h(a){console.log("Error",a)}function i(d){a.languageModule=d.languageModule[0],b.resource.get({user_id:c.user.id,language_module_id:a.languageModule.id},f,g)}function j(b){a.selectedCueVideo=b}function k(){a.time<25?a.time++:!1}function l(){a.time>5?a.time--:!1}d.resource.get({user_id:c.user.id,language:a.selectedLanguage},i,h),a.$on("changeLanguage",function(){d.resource.get({user_id:c.user.id,language:e.search().lang},i,h)}),a.time=15,a.decrease=l,a.increase=k,a.selectCueVideo=j};a.$inject=["$scope","Cue","$rootScope","LanguageModule","$location"],angular.module("angularApp").controller("studyTopCtrl",a)}(),function(){"use strict";var a=function(a,b,c,d,e,f,g,h){function i(b){a.collocations=b.collocations}function j(){var a=e.open({animation:!0,templateUrl:"components/studyWriting/modalTemplate.html",controller:"modalCtrl",resolve:{answer:function(){return document.getElementById("writingAnswer").value}}});a.result.then(function(){var a={writing_answer:{language_module_id:d.lm,writing_answer:document.getElementById("writingAnswer").value,topic_id:k.id}};g.resource.save(a,function(a){console.log("success",a)},function(a){console.log("Error",a)}),c.go("userHome")},function(){c.go("userHome")})}var k;a.wordCount=0,h.resource.get({video_id:d.v,original:!0},i,function(a){console.log(a)}),a.countWords=function(b){var c=b.target.value;c=c.replace(/(^\s*)|(\s*$)/gi,""),c=c.replace(/[ ]{2,}/gi," "),c=c.replace(/\n /,"\n"),a.wordCount=c.split(" ").length},f.fetch("writing_prompts",d.v).then(function(b){var c=b.resource;k=b.topic,c[0]?(a.prompt=c[0].prompt,a.example=c[0].example):(a.prompt="none",a.example="none")},function(a){console.log("Error",a)}),a.studyTime=d.t/4*60,a.timerRunning=!0,a.resumeTimer=function(){a.$broadcast("timer-resume"),a.timerRunning=!0},a.stopTimer=function(){a.$broadcast("timer-stop"),a.timerRunning=!1},a.finished=function(){j()}};a.$inject=["$scope","$rootScope","$state","$stateParams","$modal","Video","WritingAnswer","Collocation"],angular.module("angularApp").controller("studyWritingCtrl",a)}(),function(){"use strict";var a=function(a){a.test="foouserAccount"};a.$inject=["$scope"],angular.module("angularApp").controller("userAccountCtrl",a)}(),function(){"use strict";var a=function(){return{restrict:"E",templateUrl:"components/userAccount/userAccountFormTemplate.html"}};angular.module("angularApp").directive("userAccountForm",a),a.$inject=[]}(),function(){"use strict";var a=function(a){a.test="foouserInterests"};a.$inject=["$scope"],angular.module("angularApp").controller("userInterestsCtrl",a)}(),function(){"use strict";var a=function(a,b,c,d,e,f,g,h,i){function j(b){angular.forEach(b.cueVideos,function(a){a.thumbnailUrl="http://i1.ytimg.com/vi/"+a.code+"/default.jpg"}),a.cueVideos=b.cueVideos,a.selectedCueVideo=b.selectedVideo,a.tabs=b.tabs,a.video=b.video,a.selectedQuote=b.selectedQuote,a.selectedDescription=b.selectedDescription,a.collocations=b.collocations}function k(b){var c=angular.fromJson(b.writing_answers);c.length?(a.noWritingAnswers=!1,a.writingAnswers=c):a.noWritingAnswers=!0}function l(a){m=a.languageModule[0],h.resource.get({language_module_id:m.id},k,function(a){console.log(a)}),e.initializeContents(n.id,m.id,null,!0).then(j,function(a){console.log(a)})}var m,n=b.user;a.playerVars=i.userHome,f.resource.get({user_id:b.user.id,language:a.selectedLanguage},l,function(a){console.log(a)}),a.$on("changeLanguage",function(){f.resource.get({user_id:b.user.id,language:g.search().lang},l,function(a){console.log(a)})}),a.selectCueVideo=function(a){e.initializeContents(n,m.id,a,!0).then(j,function(a){console.log(a)})}};a.$inject=["$scope","$rootScope","Video","Collocation","Cue","LanguageModule","$location","WritingAnswer","PlayerVars"],angular.module("angularApp").controller("userHomeCtrl",a)}();